<!DOCTYPE html>
<html lang="en">
  <!-- Head -->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Anime Boxes Tag Filler</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <!-- Body -->
  <body>
	  <div class="container">
		<h1>Anime Boxes Tag Filler</h1>
		<form action="#" method="GET">
		<div class="form-group">
			<label for="original">Backup Data (edit to your liking):</label>
			<textarea class="form-control" id="original" rows="5">{"backupTime":"2020-04-03T21:21:02+0100","backupVersion":"1.0","bannedTags":[],"creatorName":"Anime boxes (Android)","creatorVersion":"1.5.3","favorites":[],"searchHistory":[],"servers":[]}</textarea>
		</div>
		<div class="form-group">
			<label for="tags">Tags (one entry per line, can have multiple in a single line):</label>
			<textarea class="form-control" id="tags" rows="5"></textarea>
		</div>
		<div class="form-group">
			<label for="result">Result:</label>
			<textarea class="form-control" id="result" rows="5"></textarea>
		</div>
		
		<div class="text-center">
			<button type="submit" class="btn btn-primary mb-2" onclick="Process()">Process</button>
		</div>
		</form>
	</div>

	<script type="text/javascript">
	function Process() {
	
		var json = {}
		
		try {
		
			json = JSON.parse($("#original").val());

		} catch(e) {
		
			$("#result").val("Failed to load the backup data");
			
			return;
		}
		
		var tags = $("#tags").val().split("\n");
		
		var newTags = [];
		
		for(var i = 0; i < tags.length; i++)
		{
			if(tags[i].length == 0) {
			
				continue;
			}
			
			newTags[newTags.length] = {
				"bannedTagid": 0,
				"tagText": tags[i],
				"mId": i + 1
			};
		}
		
		json.bannedTags = newTags;
		
		$("#result").val(JSON.stringify(json, null, 2));
	}
	</script>
  </body>
</html>